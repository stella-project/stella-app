version: '3'
networks:
  stella-shared:
    external:
      name: stella-server_default
services:
  app:
    build: ./app
    volumes:
        - /var/run/docker.sock/:/var/run/docker.sock
        - ./app/log:/app/log
    ports:
        - 8080:8000
    depends_on:
        - rank_dummy
        - rank_dummy_base
        - gesis_rec_precom
        - gesis_rec_micro
        - stella_lj_participant_test
    networks:
        - stella-shared
  rank_dummy:
    build: https://github.com/stella-project
    container_name: rank_dummy
    volumes:
        - ./data/:/data/
    networks:
        - stella-shared
  rank_dummy_base:
    build: https://github.com/stella-project
    container_name: rank_dummy_base
    volumes:
        - ./data/:/data/
    networks:
        - stella-shared
  gesis_rec_precom:
    build: https://github.com/stella-project/gesis_rec_precom
    container_name: gesis_rec_precom
    volumes:
        - ./data/:/data/
    networks:
        - stella-shared
  gesis_rec_micro:
    build: https://github.com/stella-project/gesis_rec_micro
    container_name: gesis_rec_micro
    volumes:
        - ./data/:/data/
    networks:
        - stella-shared
  stella_lj_participant_test:
    build: https://github.com/ljgarcia/stella-lj-participant-test
    container_name: stella_lj_participant_test
    volumes:
        - ./data/:/data/
    networks:
        - stella-shared
