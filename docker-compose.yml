version: '3'
services:
    web:
        build: ./app
        volumes:
          - /var/run/docker.sock/:/var/run/docker.sock
        ports:
            - "80:80"
        depends_on:
          - solr

    solr:
      image: solr
      container_name: solr
      volumes:
        - ~/data/sample/:/opt/solr/collection/
        - ./solr/script/:/script/
        # - ./solr/init/:/docker-entrypoint-initdb.d/
      ports:
        - "8983:8983"

    lucene:
      image: openjdk
      container_name: lucene
      command: tail -F anything
      volumes:
        - ~/data/sample/:/data/
        - ./lucene/:/lucene/
        - ./lucene/script/:/script/