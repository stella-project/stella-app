version: '3'
services:
    web:
        build: ./app
        volumes:
          - /var/run/docker.sock/:/var/run/docker.sock
          - ./app/log:/app/log
        ports:
            - "80:8000"
        depends_on:
            - livivo_elastic
            - livivo_elastic_base

    livivo_elastic:
        build: ./livivo_elastic
        container_name: livivo_elastic
        volumes:
          - ./livivo_elastic/data/:/data/

    livivo_elastic_base:
        build: ./livivo_elastic_base
        container_name: livivo_elastic_base
        volumes:
          - ./livivo_elastic/data/:/data/

#    livivo:
#        build: ../livivo_solr_template
#        container_name: livivo
#        volumes:
#          - ../livivo_solr_template/conf:/opt/solr/server/solr/configsets/livivo/conf
#          - ../livivo_solr_template/data:/opt/solr/livivo_data/data
#        ports:
#          - "8983:8983"
#
#    livivo_base:
#        build: ../livivo_solr_template
#        container_name: livivo_base
#        volumes:
#          - ../livivo_solr_template/conf:/opt/solr/server/solr/configsets/livivo/conf
#          - ../livivo_solr_template/data:/opt/solr/livivo_data/data